{"version":3,"sources":["../src/jsx-runtime.ts"],"names":[],"mappings":"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","file":"jsx-runtime.js","sourcesContent":["/**\n * Nova JSX Runtime\n *\n * Implements a React-compatible JSX runtime for Nova components.\n * This enables the automatic JSX transform (jsx/jsxs/Fragment).\n *\n * Usage in tsconfig.json:\n *   \"jsx\": \"react-jsx\",\n *   \"jsxImportSource\": \"@aspect/nova\"\n */\n\nimport type {\n  ListProps,\n  ListItemProps,\n  ListSectionProps,\n  DetailProps,\n  DetailMetadataProps,\n  MetadataItemProps,\n  FormProps,\n  FormTextFieldProps,\n  FormDropdownProps,\n  FormCheckboxProps,\n  FormDatePickerProps,\n  ComponentData,\n  ListChildData,\n  FormFieldData,\n  MetadataItemData,\n} from \"./types/index.js\";\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Internal element representation\n// ─────────────────────────────────────────────────────────────────────────────\n\nconst NOVA_ELEMENT_TYPE = Symbol.for(\"nova.element\");\n\n/**\n * Internal Nova element structure.\n */\nexport interface NovaElement<P = unknown> {\n  $$typeof: typeof NOVA_ELEMENT_TYPE;\n  type: string | NovaComponent<P>;\n  props: P;\n  key: string | null;\n}\n\n/**\n * A Nova component function.\n */\nexport type NovaComponent<P = unknown> = (props: P) => NovaElement | null;\n\n/**\n * Check if a value is a Nova element.\n */\nexport function isNovaElement(value: unknown): value is NovaElement {\n  return (\n    typeof value === \"object\" &&\n    value !== null &&\n    (value as NovaElement).$$typeof === NOVA_ELEMENT_TYPE\n  );\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// JSX Runtime Functions\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Creates a Nova element (single child case).\n * Used by the automatic JSX transform.\n */\nexport function jsx<P extends Record<string, unknown>>(\n  type: string | NovaComponent<P>,\n  props: P & { children?: unknown },\n  key?: string\n): NovaElement<P> {\n  return {\n    $$typeof: NOVA_ELEMENT_TYPE,\n    type,\n    props: props as P,\n    key: key ?? null,\n  };\n}\n\n/**\n * Creates a Nova element (multiple children case).\n * Used by the automatic JSX transform.\n */\nexport function jsxs<P extends Record<string, unknown>>(\n  type: string | NovaComponent<P>,\n  props: P & { children?: unknown[] },\n  key?: string\n): NovaElement<P> {\n  return jsx(type, props, key);\n}\n\n/**\n * Fragment - groups children without a wrapper element.\n */\nexport const Fragment = Symbol.for(\"nova.fragment\");\n\n/**\n * Creates a Nova element (development mode).\n * Same as jsx but could include additional debug info.\n */\nexport const jsxDEV = jsx;\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Element Serialization\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Flatten children, removing nulls/undefined/booleans and flattening arrays.\n */\nfunction flattenChildren(children: unknown): NovaElement[] {\n  if (children == null || typeof children === \"boolean\") {\n    return [];\n  }\n\n  if (Array.isArray(children)) {\n    return children.flatMap(flattenChildren);\n  }\n\n  if (isNovaElement(children)) {\n    return [children];\n  }\n\n  // Strings and numbers are not supported as direct children in Nova\n  return [];\n}\n\n/**\n * Serialize a Nova element tree to the JSON format expected by Rust.\n */\nexport function serializeElement(element: NovaElement): ComponentData {\n  const { type, props } = element;\n\n  // If type is a function component, render it first\n  if (typeof type === \"function\") {\n    const rendered = type(props);\n    if (rendered === null) {\n      throw new Error(\"Component returned null - Nova requires a component tree\");\n    }\n    return serializeElement(rendered);\n  }\n\n  // Handle built-in component types\n  switch (type) {\n    case \"List\":\n      return serializeList(props as ListProps & { children?: unknown });\n\n    case \"Detail\":\n      return serializeDetail(props as DetailProps);\n\n    case \"Form\":\n      return serializeForm(props as FormProps & { children?: unknown });\n\n    default:\n      throw new Error(`Unknown component type: ${type}`);\n  }\n}\n\n/**\n * Serialize a List component.\n */\nfunction serializeList(props: ListProps & { children?: unknown }): ComponentData {\n  const children = flattenChildren(props.children);\n  const serializedChildren: ListChildData[] = [];\n\n  for (const child of children) {\n    if (typeof child.type !== \"string\") {\n      throw new Error(\"List children must be List.Item or List.Section\");\n    }\n\n    switch (child.type) {\n      case \"List.Item\": {\n        const itemProps = child.props as ListItemProps;\n        serializedChildren.push({\n          type: \"List.Item\",\n          id: itemProps.id,\n          title: itemProps.title,\n          subtitle: itemProps.subtitle,\n          icon: itemProps.icon,\n          accessories: itemProps.accessories,\n          keywords: itemProps.keywords,\n          actions: itemProps.actions,\n        });\n        break;\n      }\n\n      case \"List.Section\": {\n        const sectionProps = child.props as ListSectionProps & { children?: unknown };\n        const sectionChildren = flattenChildren(sectionProps.children);\n\n        serializedChildren.push({\n          type: \"List.Section\",\n          title: sectionProps.title,\n          subtitle: sectionProps.subtitle,\n          children: sectionChildren.map((item) => {\n            const itemProps = item.props as ListItemProps;\n            return {\n              id: itemProps.id,\n              title: itemProps.title,\n              subtitle: itemProps.subtitle,\n              icon: itemProps.icon,\n              accessories: itemProps.accessories,\n              keywords: itemProps.keywords,\n              actions: itemProps.actions,\n            };\n          }),\n        });\n        break;\n      }\n\n      default:\n        throw new Error(`Invalid List child type: ${child.type}`);\n    }\n  }\n\n  return {\n    type: \"List\",\n    isLoading: props.isLoading,\n    searchBarPlaceholder: props.searchBarPlaceholder,\n    filtering: props.filtering,\n    onSearchChange: props.onSearchChange,\n    onSelectionChange: props.onSelectionChange,\n    children: serializedChildren,\n  };\n}\n\n/**\n * Serialize a Detail component.\n */\nfunction serializeDetail(props: DetailProps): ComponentData {\n  return {\n    type: \"Detail\",\n    markdown: props.markdown,\n    isLoading: props.isLoading,\n    actions: props.actions,\n    metadata: props.metadata,\n  };\n}\n\n/**\n * Serialize a Form component.\n */\nfunction serializeForm(props: FormProps & { children?: unknown }): ComponentData {\n  const children = flattenChildren(props.children);\n  const serializedChildren: FormFieldData[] = [];\n\n  for (const child of children) {\n    if (typeof child.type !== \"string\") {\n      throw new Error(\"Form children must be form field components\");\n    }\n\n    switch (child.type) {\n      case \"Form.TextField\": {\n        const fieldProps = child.props as FormTextFieldProps;\n        serializedChildren.push({\n          type: \"Form.TextField\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          placeholder: fieldProps.placeholder,\n          defaultValue: fieldProps.defaultValue,\n          fieldType: fieldProps.fieldType,\n          validation: fieldProps.validation,\n        });\n        break;\n      }\n\n      case \"Form.Dropdown\": {\n        const fieldProps = child.props as FormDropdownProps;\n        serializedChildren.push({\n          type: \"Form.Dropdown\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          defaultValue: fieldProps.defaultValue,\n          options: fieldProps.options,\n        });\n        break;\n      }\n\n      case \"Form.Checkbox\": {\n        const fieldProps = child.props as FormCheckboxProps;\n        serializedChildren.push({\n          type: \"Form.Checkbox\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          label: fieldProps.label,\n          defaultValue: fieldProps.defaultValue,\n        });\n        break;\n      }\n\n      case \"Form.DatePicker\": {\n        const fieldProps = child.props as FormDatePickerProps;\n        serializedChildren.push({\n          type: \"Form.DatePicker\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          defaultValue: fieldProps.defaultValue,\n          includeTime: fieldProps.includeTime,\n        });\n        break;\n      }\n\n      default:\n        throw new Error(`Invalid Form field type: ${child.type}`);\n    }\n  }\n\n  return {\n    type: \"Form\",\n    isLoading: props.isLoading,\n    onSubmit: props.onSubmit,\n    onChange: props.onChange,\n    children: serializedChildren,\n  };\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// JSX Namespace for TypeScript\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport namespace JSX {\n  export interface Element extends NovaElement {}\n\n  export interface ElementChildrenAttribute {\n    children: {};\n  }\n\n  export interface IntrinsicElements {\n    // List components\n    List: ListProps & { children?: unknown; key?: string };\n    \"List.Item\": ListItemProps & { key?: string };\n    \"List.Section\": ListSectionProps & { children?: unknown; key?: string };\n\n    // Detail components\n    Detail: DetailProps & { key?: string };\n    \"Detail.Metadata\": DetailMetadataProps & { children?: unknown; key?: string };\n    \"Detail.Metadata.Item\": MetadataItemProps & { key?: string };\n\n    // Form components\n    Form: FormProps & { children?: unknown; key?: string };\n    \"Form.TextField\": FormTextFieldProps & { key?: string };\n    \"Form.Dropdown\": FormDropdownProps & { key?: string };\n    \"Form.Checkbox\": FormCheckboxProps & { key?: string };\n    \"Form.DatePicker\": FormDatePickerProps & { key?: string };\n  }\n}\n"]}