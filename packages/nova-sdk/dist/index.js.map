{"version":3,"sources":["../src/types/common.ts","../src/components.ts","../src/jsx-runtime.ts","../src/hooks.ts","../src/navigation.ts","../src/ipc.ts"],"names":["List","DetailMetadata","Detail","Form","isNovaElement","renderComponent"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Common types used across Nova components.\n * These types mirror the Rust definitions in src/extensions/components/common.rs\n */\n\n/**\n * Icon reference - can be a system icon, URL, asset, emoji, or text.\n * Discriminated union with \"type\" tag.\n */\nexport type IconType =\n  | { type: \"system\"; name: string }\n  | { type: \"url\"; url: string }\n  | { type: \"asset\"; name: string }\n  | { type: \"emoji\"; emoji: string }\n  | { type: \"text\"; text: string; color?: string };\n\n/**\n * Helper object to create Icon values.\n * Use Icon.system(\"star.fill\") instead of { type: \"system\", name: \"star.fill\" }\n */\nexport const Icon = {\n  system: (name: string): IconType => ({ type: \"system\", name }),\n  url: (url: string): IconType => ({ type: \"url\", url }),\n  asset: (name: string): IconType => ({ type: \"asset\", name }),\n  emoji: (emoji: string): IconType => ({ type: \"emoji\", emoji }),\n  text: (text: string, color?: string): IconType => ({ type: \"text\", text, color }),\n} as const;\n\n/**\n * Accessory displayed on the right side of list items.\n * Discriminated union with \"type\" tag.\n */\nexport type AccessoryType =\n  | { type: \"text\"; text: string }\n  | { type: \"icon\"; icon: IconType; text?: string }\n  | { type: \"tag\"; value: string; color?: string }\n  | { type: \"date\"; date: string; format?: DateFormat };\n\n/**\n * Helper object to create Accessory values.\n * Use Accessory.tag(\"TypeScript\", \"#3178c6\") instead of { type: \"tag\", value: \"TypeScript\", color: \"#3178c6\" }\n */\nexport const Accessory = {\n  text: (text: string): AccessoryType => ({ type: \"text\", text }),\n  icon: (icon: IconType, text?: string): AccessoryType => ({ type: \"icon\", icon, text }),\n  tag: (value: string, color?: string): AccessoryType => ({ type: \"tag\", value, color }),\n  date: (date: string | Date, format?: DateFormat): AccessoryType => ({\n    type: \"date\",\n    date: typeof date === \"string\" ? date : date.toISOString(),\n    format,\n  }),\n} as const;\n\n/**\n * Date display format.\n */\nexport type DateFormat = \"relative\" | \"absolute\" | \"time\";\n\n/**\n * Keyboard shortcut definition.\n */\nexport interface Shortcut {\n  /** Modifier keys */\n  modifiers: KeyModifier[];\n  /** The key to press (e.g., \"o\", \"enter\", \"backspace\") */\n  key: string;\n}\n\n/**\n * Keyboard modifier keys.\n */\nexport type KeyModifier = \"cmd\" | \"ctrl\" | \"alt\" | \"shift\";\n\n/**\n * Helper to create keyboard shortcuts.\n */\nexport function shortcut(modifiers: KeyModifier[], key: string): Shortcut {\n  return { modifiers, key };\n}\n","/**\n * Component Factory Functions\n *\n * These provide an alternative to JSX for creating Nova components.\n * Useful when JSX isn't available or for programmatic component creation.\n */\n\nimport type {\n  ListProps,\n  ListItemProps,\n  ListSectionProps,\n  DetailProps,\n  MetadataItemProps,\n  FormProps,\n  FormTextFieldProps,\n  FormDropdownProps,\n  FormCheckboxProps,\n  FormDatePickerProps,\n  ListData,\n  DetailData,\n  FormData,\n  ListChildData,\n  ListItemData,\n  FormFieldData,\n  DetailMetadataData,\n  MetadataItemData,\n  Action,\n  ActionPanel,\n  ActionStyle,\n  Shortcut,\n  IconType,\n} from \"./types/index.js\";\n\n// ─────────────────────────────────────────────────────────────────────────────\n// List Components\n// ─────────────────────────────────────────────────────────────────────────────\n\ninterface ListFunction {\n  (props: ListProps & { children?: ListChildData[] }): ListData;\n  Item: (props: ListItemProps) => ListChildData;\n  Section: (props: ListSectionProps & { items?: ListItemProps[] }) => ListChildData;\n}\n\n/**\n * Create a List component.\n */\nexport const List: ListFunction = Object.assign(\n  function List(props: ListProps & { children?: ListChildData[] }): ListData {\n    return {\n      type: \"List\",\n      isLoading: props.isLoading,\n      searchBarPlaceholder: props.searchBarPlaceholder,\n      filtering: props.filtering,\n      onSearchChange: props.onSearchChange,\n      onSelectionChange: props.onSelectionChange,\n      children: props.children ?? [],\n    };\n  },\n  {\n    /**\n     * Create a List.Item.\n     */\n    Item: function ListItem(props: ListItemProps): ListChildData {\n      return {\n        type: \"List.Item\" as const,\n        id: props.id,\n        title: props.title,\n        subtitle: props.subtitle,\n        icon: props.icon,\n        accessories: props.accessories,\n        keywords: props.keywords,\n        actions: props.actions,\n      };\n    },\n    /**\n     * Create a List.Section.\n     */\n    Section: function ListSection(\n      props: ListSectionProps & { items?: ListItemProps[] }\n    ): ListChildData {\n      const items = props.items ?? [];\n      return {\n        type: \"List.Section\" as const,\n        title: props.title,\n        subtitle: props.subtitle,\n        children: items.map((item) => ({\n          id: item.id,\n          title: item.title,\n          subtitle: item.subtitle,\n          icon: item.icon,\n          accessories: item.accessories,\n          keywords: item.keywords,\n          actions: item.actions,\n        })),\n      };\n    },\n  }\n);\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Detail Components\n// ─────────────────────────────────────────────────────────────────────────────\n\ninterface DetailMetadataFunction {\n  (props: { children?: MetadataItemProps[] }): DetailMetadataData;\n  Item: (props: MetadataItemProps) => MetadataItemData;\n}\n\ninterface DetailFunction {\n  (props: DetailProps): DetailData;\n  Metadata: DetailMetadataFunction;\n}\n\nconst DetailMetadata: DetailMetadataFunction = Object.assign(\n  function DetailMetadata(props: { children?: MetadataItemProps[] }): DetailMetadataData {\n    return {\n      children: (props.children ?? []).map((item): MetadataItemData => ({\n        title: item.title,\n        text: item.text,\n        icon: item.icon,\n        link: item.link,\n      })),\n    };\n  },\n  {\n    /**\n     * Create Detail.Metadata.Item.\n     */\n    Item: function MetadataItem(props: MetadataItemProps): MetadataItemData {\n      return {\n        title: props.title,\n        text: props.text,\n        icon: props.icon,\n        link: props.link,\n      };\n    },\n  }\n);\n\n/**\n * Create a Detail component.\n */\nexport const Detail: DetailFunction = Object.assign(\n  function Detail(props: DetailProps): DetailData {\n    return {\n      type: \"Detail\",\n      markdown: props.markdown,\n      isLoading: props.isLoading,\n      actions: props.actions,\n      metadata: props.metadata,\n    };\n  },\n  {\n    Metadata: DetailMetadata,\n  }\n);\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Form Components\n// ─────────────────────────────────────────────────────────────────────────────\n\ninterface FormFunction {\n  (props: FormProps & { children?: FormFieldData[] }): FormData;\n  TextField: (props: FormTextFieldProps) => FormFieldData;\n  Dropdown: (props: FormDropdownProps) => FormFieldData;\n  Checkbox: (props: FormCheckboxProps) => FormFieldData;\n  DatePicker: (props: FormDatePickerProps) => FormFieldData;\n}\n\n/**\n * Create a Form component.\n */\nexport const Form: FormFunction = Object.assign(\n  function Form(props: FormProps & { children?: FormFieldData[] }): FormData {\n    return {\n      type: \"Form\",\n      isLoading: props.isLoading,\n      onSubmit: props.onSubmit,\n      onChange: props.onChange,\n      children: props.children ?? [],\n    };\n  },\n  {\n    /**\n     * Create a Form.TextField.\n     */\n    TextField: function FormTextField(props: FormTextFieldProps): FormFieldData {\n      return {\n        type: \"Form.TextField\",\n        id: props.id,\n        title: props.title,\n        placeholder: props.placeholder,\n        defaultValue: props.defaultValue,\n        fieldType: props.fieldType,\n        validation: props.validation,\n      };\n    },\n    /**\n     * Create a Form.Dropdown.\n     */\n    Dropdown: function FormDropdown(props: FormDropdownProps): FormFieldData {\n      return {\n        type: \"Form.Dropdown\",\n        id: props.id,\n        title: props.title,\n        defaultValue: props.defaultValue,\n        options: props.options,\n      };\n    },\n    /**\n     * Create a Form.Checkbox.\n     */\n    Checkbox: function FormCheckbox(props: FormCheckboxProps): FormFieldData {\n      return {\n        type: \"Form.Checkbox\",\n        id: props.id,\n        title: props.title,\n        label: props.label,\n        defaultValue: props.defaultValue,\n      };\n    },\n    /**\n     * Create a Form.DatePicker.\n     */\n    DatePicker: function FormDatePicker(props: FormDatePickerProps): FormFieldData {\n      return {\n        type: \"Form.DatePicker\",\n        id: props.id,\n        title: props.title,\n        defaultValue: props.defaultValue,\n        includeTime: props.includeTime,\n      };\n    },\n  }\n);\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Action Helpers\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Create an ActionPanel.\n */\nexport function createActionPanel(\n  title: string | undefined,\n  actions: Action[]\n): ActionPanel {\n  return { title, children: actions };\n}\n\n/**\n * Create an Action.\n */\nexport function createAction(props: {\n  id: string;\n  title: string;\n  icon?: IconType;\n  shortcut?: Shortcut;\n  style?: ActionStyle;\n  onAction?: string;\n}): Action {\n  return {\n    id: props.id,\n    title: props.title,\n    icon: props.icon,\n    shortcut: props.shortcut,\n    style: props.style ?? \"default\",\n    onAction: props.onAction,\n  };\n}\n","/**\n * Nova JSX Runtime\n *\n * Implements a React-compatible JSX runtime for Nova components.\n * This enables the automatic JSX transform (jsx/jsxs/Fragment).\n *\n * Usage in tsconfig.json:\n *   \"jsx\": \"react-jsx\",\n *   \"jsxImportSource\": \"@aspect/nova\"\n */\n\nimport type {\n  ListProps,\n  ListItemProps,\n  ListSectionProps,\n  DetailProps,\n  DetailMetadataProps,\n  MetadataItemProps,\n  FormProps,\n  FormTextFieldProps,\n  FormDropdownProps,\n  FormCheckboxProps,\n  FormDatePickerProps,\n  ComponentData,\n  ListChildData,\n  FormFieldData,\n  MetadataItemData,\n} from \"./types/index.js\";\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Internal element representation\n// ─────────────────────────────────────────────────────────────────────────────\n\nconst NOVA_ELEMENT_TYPE = Symbol.for(\"nova.element\");\n\n/**\n * Internal Nova element structure.\n */\nexport interface NovaElement<P = unknown> {\n  $$typeof: typeof NOVA_ELEMENT_TYPE;\n  type: string | NovaComponent<P>;\n  props: P;\n  key: string | null;\n}\n\n/**\n * A Nova component function.\n */\nexport type NovaComponent<P = unknown> = (props: P) => NovaElement | null;\n\n/**\n * Check if a value is a Nova element.\n */\nexport function isNovaElement(value: unknown): value is NovaElement {\n  return (\n    typeof value === \"object\" &&\n    value !== null &&\n    (value as NovaElement).$$typeof === NOVA_ELEMENT_TYPE\n  );\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// JSX Runtime Functions\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Creates a Nova element (single child case).\n * Used by the automatic JSX transform.\n */\nexport function jsx<P extends Record<string, unknown>>(\n  type: string | NovaComponent<P>,\n  props: P & { children?: unknown },\n  key?: string\n): NovaElement<P> {\n  return {\n    $$typeof: NOVA_ELEMENT_TYPE,\n    type,\n    props: props as P,\n    key: key ?? null,\n  };\n}\n\n/**\n * Creates a Nova element (multiple children case).\n * Used by the automatic JSX transform.\n */\nexport function jsxs<P extends Record<string, unknown>>(\n  type: string | NovaComponent<P>,\n  props: P & { children?: unknown[] },\n  key?: string\n): NovaElement<P> {\n  return jsx(type, props, key);\n}\n\n/**\n * Fragment - groups children without a wrapper element.\n */\nexport const Fragment = Symbol.for(\"nova.fragment\");\n\n/**\n * Creates a Nova element (development mode).\n * Same as jsx but could include additional debug info.\n */\nexport const jsxDEV = jsx;\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Element Serialization\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Flatten children, removing nulls/undefined/booleans and flattening arrays.\n */\nfunction flattenChildren(children: unknown): NovaElement[] {\n  if (children == null || typeof children === \"boolean\") {\n    return [];\n  }\n\n  if (Array.isArray(children)) {\n    return children.flatMap(flattenChildren);\n  }\n\n  if (isNovaElement(children)) {\n    return [children];\n  }\n\n  // Strings and numbers are not supported as direct children in Nova\n  return [];\n}\n\n/**\n * Serialize a Nova element tree to the JSON format expected by Rust.\n */\nexport function serializeElement(element: NovaElement): ComponentData {\n  const { type, props } = element;\n\n  // If type is a function component, render it first\n  if (typeof type === \"function\") {\n    const rendered = type(props);\n    if (rendered === null) {\n      throw new Error(\"Component returned null - Nova requires a component tree\");\n    }\n    return serializeElement(rendered);\n  }\n\n  // Handle built-in component types\n  switch (type) {\n    case \"List\":\n      return serializeList(props as ListProps & { children?: unknown });\n\n    case \"Detail\":\n      return serializeDetail(props as DetailProps);\n\n    case \"Form\":\n      return serializeForm(props as FormProps & { children?: unknown });\n\n    default:\n      throw new Error(`Unknown component type: ${type}`);\n  }\n}\n\n/**\n * Serialize a List component.\n */\nfunction serializeList(props: ListProps & { children?: unknown }): ComponentData {\n  const children = flattenChildren(props.children);\n  const serializedChildren: ListChildData[] = [];\n\n  for (const child of children) {\n    if (typeof child.type !== \"string\") {\n      throw new Error(\"List children must be List.Item or List.Section\");\n    }\n\n    switch (child.type) {\n      case \"List.Item\": {\n        const itemProps = child.props as ListItemProps;\n        serializedChildren.push({\n          type: \"List.Item\",\n          id: itemProps.id,\n          title: itemProps.title,\n          subtitle: itemProps.subtitle,\n          icon: itemProps.icon,\n          accessories: itemProps.accessories,\n          keywords: itemProps.keywords,\n          actions: itemProps.actions,\n        });\n        break;\n      }\n\n      case \"List.Section\": {\n        const sectionProps = child.props as ListSectionProps & { children?: unknown };\n        const sectionChildren = flattenChildren(sectionProps.children);\n\n        serializedChildren.push({\n          type: \"List.Section\",\n          title: sectionProps.title,\n          subtitle: sectionProps.subtitle,\n          children: sectionChildren.map((item) => {\n            const itemProps = item.props as ListItemProps;\n            return {\n              id: itemProps.id,\n              title: itemProps.title,\n              subtitle: itemProps.subtitle,\n              icon: itemProps.icon,\n              accessories: itemProps.accessories,\n              keywords: itemProps.keywords,\n              actions: itemProps.actions,\n            };\n          }),\n        });\n        break;\n      }\n\n      default:\n        throw new Error(`Invalid List child type: ${child.type}`);\n    }\n  }\n\n  return {\n    type: \"List\",\n    isLoading: props.isLoading,\n    searchBarPlaceholder: props.searchBarPlaceholder,\n    filtering: props.filtering,\n    onSearchChange: props.onSearchChange,\n    onSelectionChange: props.onSelectionChange,\n    children: serializedChildren,\n  };\n}\n\n/**\n * Serialize a Detail component.\n */\nfunction serializeDetail(props: DetailProps): ComponentData {\n  return {\n    type: \"Detail\",\n    markdown: props.markdown,\n    isLoading: props.isLoading,\n    actions: props.actions,\n    metadata: props.metadata,\n  };\n}\n\n/**\n * Serialize a Form component.\n */\nfunction serializeForm(props: FormProps & { children?: unknown }): ComponentData {\n  const children = flattenChildren(props.children);\n  const serializedChildren: FormFieldData[] = [];\n\n  for (const child of children) {\n    if (typeof child.type !== \"string\") {\n      throw new Error(\"Form children must be form field components\");\n    }\n\n    switch (child.type) {\n      case \"Form.TextField\": {\n        const fieldProps = child.props as FormTextFieldProps;\n        serializedChildren.push({\n          type: \"Form.TextField\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          placeholder: fieldProps.placeholder,\n          defaultValue: fieldProps.defaultValue,\n          fieldType: fieldProps.fieldType,\n          validation: fieldProps.validation,\n        });\n        break;\n      }\n\n      case \"Form.Dropdown\": {\n        const fieldProps = child.props as FormDropdownProps;\n        serializedChildren.push({\n          type: \"Form.Dropdown\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          defaultValue: fieldProps.defaultValue,\n          options: fieldProps.options,\n        });\n        break;\n      }\n\n      case \"Form.Checkbox\": {\n        const fieldProps = child.props as FormCheckboxProps;\n        serializedChildren.push({\n          type: \"Form.Checkbox\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          label: fieldProps.label,\n          defaultValue: fieldProps.defaultValue,\n        });\n        break;\n      }\n\n      case \"Form.DatePicker\": {\n        const fieldProps = child.props as FormDatePickerProps;\n        serializedChildren.push({\n          type: \"Form.DatePicker\",\n          id: fieldProps.id,\n          title: fieldProps.title,\n          defaultValue: fieldProps.defaultValue,\n          includeTime: fieldProps.includeTime,\n        });\n        break;\n      }\n\n      default:\n        throw new Error(`Invalid Form field type: ${child.type}`);\n    }\n  }\n\n  return {\n    type: \"Form\",\n    isLoading: props.isLoading,\n    onSubmit: props.onSubmit,\n    onChange: props.onChange,\n    children: serializedChildren,\n  };\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// JSX Namespace for TypeScript\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport namespace JSX {\n  export interface Element extends NovaElement {}\n\n  export interface ElementChildrenAttribute {\n    children: {};\n  }\n\n  export interface IntrinsicElements {\n    // List components\n    List: ListProps & { children?: unknown; key?: string };\n    \"List.Item\": ListItemProps & { key?: string };\n    \"List.Section\": ListSectionProps & { children?: unknown; key?: string };\n\n    // Detail components\n    Detail: DetailProps & { key?: string };\n    \"Detail.Metadata\": DetailMetadataProps & { children?: unknown; key?: string };\n    \"Detail.Metadata.Item\": MetadataItemProps & { key?: string };\n\n    // Form components\n    Form: FormProps & { children?: unknown; key?: string };\n    \"Form.TextField\": FormTextFieldProps & { key?: string };\n    \"Form.Dropdown\": FormDropdownProps & { key?: string };\n    \"Form.Checkbox\": FormCheckboxProps & { key?: string };\n    \"Form.DatePicker\": FormDatePickerProps & { key?: string };\n  }\n}\n","/**\n * Nova Hooks System\n *\n * Implements React-like hooks for Nova components.\n * Uses a simple render context that tracks hook state.\n */\n\nimport type { NovaElement } from \"./jsx-runtime.js\";\nimport { serializeElement } from \"./jsx-runtime.js\";\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Render Context\n// ─────────────────────────────────────────────────────────────────────────────\n\ninterface HookState {\n  value: unknown;\n  deps?: unknown[];\n}\n\ninterface RenderContext {\n  /** Current hook index during render */\n  hookIndex: number;\n  /** Hook states for the current component */\n  hookStates: HookState[];\n  /** Whether this is the first render */\n  isFirstRender: boolean;\n  /** Pending effects to run after render */\n  pendingEffects: Array<() => void | (() => void)>;\n  /** Cleanup functions from previous effects */\n  effectCleanups: Map<number, () => void>;\n  /** Request a re-render */\n  requestRender: () => void;\n}\n\nlet currentContext: RenderContext | null = null;\n\n/**\n * Get the current render context or throw.\n */\nfunction getContext(): RenderContext {\n  if (!currentContext) {\n    throw new Error(\n      \"Hooks can only be called inside a component during render. \" +\n      \"Make sure you are not calling hooks conditionally or in event handlers.\"\n    );\n  }\n  return currentContext;\n}\n\n/**\n * Get the next hook state slot.\n */\nfunction getHookState<T>(initialValue: () => T): { state: T; index: number; isNew: boolean } {\n  const ctx = getContext();\n  const index = ctx.hookIndex++;\n\n  if (ctx.isFirstRender || index >= ctx.hookStates.length) {\n    // First render or new hook - initialize state\n    ctx.hookStates[index] = { value: initialValue() };\n    return { state: ctx.hookStates[index].value as T, index, isNew: true };\n  }\n\n  return { state: ctx.hookStates[index].value as T, index, isNew: false };\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// useState Hook\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport type SetStateAction<S> = S | ((prevState: S) => S);\nexport type Dispatch<A> = (action: A) => void;\n\n/**\n * Returns a stateful value and a function to update it.\n *\n * @param initialState - Initial state value or function that returns it\n * @returns Tuple of [state, setState]\n */\nexport function useState<S>(\n  initialState: S | (() => S)\n): [S, Dispatch<SetStateAction<S>>] {\n  const ctx = getContext();\n  const { state, index } = getHookState(() =>\n    typeof initialState === \"function\"\n      ? (initialState as () => S)()\n      : initialState\n  );\n\n  const setState: Dispatch<SetStateAction<S>> = (action) => {\n    const prevState = ctx.hookStates[index].value as S;\n    const nextState =\n      typeof action === \"function\"\n        ? (action as (prev: S) => S)(prevState)\n        : action;\n\n    if (!Object.is(prevState, nextState)) {\n      ctx.hookStates[index].value = nextState;\n      ctx.requestRender();\n    }\n  };\n\n  return [state as S, setState];\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// useEffect Hook\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport type EffectCallback = () => void | (() => void);\nexport type DependencyList = readonly unknown[];\n\n/**\n * Accepts a function that contains imperative, possibly effectful code.\n * Effects run after render is complete.\n *\n * @param effect - Effect function (can return a cleanup function)\n * @param deps - Dependencies array (effect re-runs when these change)\n */\nexport function useEffect(effect: EffectCallback, deps?: DependencyList): void {\n  const ctx = getContext();\n  const { index, isNew } = getHookState(() => undefined);\n\n  // Check if dependencies changed\n  const prevDeps = ctx.hookStates[index].deps;\n  const depsChanged = isNew || !deps || !prevDeps || !depsEqual(prevDeps, deps);\n\n  if (depsChanged) {\n    ctx.hookStates[index].deps = deps ? [...deps] : undefined;\n\n    // Schedule the effect\n    ctx.pendingEffects.push(() => {\n      // Run cleanup from previous effect\n      const cleanup = ctx.effectCleanups.get(index);\n      if (cleanup) {\n        cleanup();\n        ctx.effectCleanups.delete(index);\n      }\n\n      // Run the effect\n      const newCleanup = effect();\n      if (typeof newCleanup === \"function\") {\n        ctx.effectCleanups.set(index, newCleanup);\n      }\n    });\n  }\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// useMemo Hook\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Returns a memoized value. Re-computes only when dependencies change.\n *\n * @param factory - Function that computes the value\n * @param deps - Dependencies array\n * @returns The memoized value\n */\nexport function useMemo<T>(factory: () => T, deps: DependencyList): T {\n  const ctx = getContext();\n  const { state, index, isNew } = getHookState<{ value: T; deps: unknown[] }>(() => ({\n    value: factory(),\n    deps: [...deps],\n  }));\n\n  // Check if dependencies changed\n  if (!isNew && depsEqual(state.deps, deps)) {\n    return state.value;\n  }\n\n  // Recompute\n  const newValue = factory();\n  ctx.hookStates[index].value = { value: newValue, deps: [...deps] };\n  return newValue;\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// useCallback Hook\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Returns a memoized callback. Only changes when dependencies change.\n *\n * @param callback - The callback function\n * @param deps - Dependencies array\n * @returns The memoized callback\n */\nexport function useCallback<T extends (...args: unknown[]) => unknown>(\n  callback: T,\n  deps: DependencyList\n): T {\n  return useMemo(() => callback, deps);\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// useRef Hook\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport interface MutableRefObject<T> {\n  current: T;\n}\n\n/**\n * Returns a mutable ref object.\n *\n * @param initialValue - Initial value for ref.current\n * @returns A ref object\n */\nexport function useRef<T>(initialValue: T): MutableRefObject<T> {\n  const { state } = getHookState<MutableRefObject<T>>(() => ({\n    current: initialValue,\n  }));\n  return state;\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// useReducer Hook\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport type Reducer<S, A> = (prevState: S, action: A) => S;\n\n/**\n * Alternative to useState for complex state logic.\n *\n * @param reducer - Reducer function\n * @param initialState - Initial state\n * @returns Tuple of [state, dispatch]\n */\nexport function useReducer<S, A>(\n  reducer: Reducer<S, A>,\n  initialState: S\n): [S, Dispatch<A>] {\n  const ctx = getContext();\n  const { state, index } = getHookState(() => initialState);\n\n  const dispatch: Dispatch<A> = (action) => {\n    const prevState = ctx.hookStates[index].value as S;\n    const nextState = reducer(prevState, action);\n\n    if (!Object.is(prevState, nextState)) {\n      ctx.hookStates[index].value = nextState;\n      ctx.requestRender();\n    }\n  };\n\n  return [state as S, dispatch];\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// useId Hook\n// ─────────────────────────────────────────────────────────────────────────────\n\nlet idCounter = 0;\n\n/**\n * Generate a unique ID for accessibility attributes.\n *\n * @returns A unique ID string\n */\nexport function useId(): string {\n  const { state } = getHookState(() => `nova-id-${++idCounter}`);\n  return state as string;\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Utility Functions\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Compare two dependency arrays for equality.\n */\nfunction depsEqual(a: readonly unknown[], b: readonly unknown[]): boolean {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (!Object.is(a[i], b[i])) return false;\n  }\n  return true;\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Render System\n// ─────────────────────────────────────────────────────────────────────────────\n\ninterface ComponentInstance {\n  component: () => NovaElement | null;\n  context: RenderContext;\n}\n\nconst componentInstances = new Map<string, ComponentInstance>();\n\n/**\n * Create a render context for a component.\n */\nfunction createRenderContext(componentId: string): RenderContext {\n  const existing = componentInstances.get(componentId);\n\n  return {\n    hookIndex: 0,\n    hookStates: existing?.context.hookStates ?? [],\n    isFirstRender: !existing,\n    pendingEffects: [],\n    effectCleanups: existing?.context.effectCleanups ?? new Map(),\n    requestRender: () => {\n      // Schedule a re-render on next tick\n      queueMicrotask(() => {\n        const instance = componentInstances.get(componentId);\n        if (instance) {\n          renderComponent(componentId, instance.component);\n        }\n      });\n    },\n  };\n}\n\n/**\n * Render a component and return serialized data.\n */\nfunction renderComponent(\n  componentId: string,\n  component: () => NovaElement | null\n): void {\n  const context = createRenderContext(componentId);\n\n  // Set current context\n  currentContext = context;\n\n  try {\n    // Call the component\n    const element = component();\n\n    if (element === null) {\n      throw new Error(\"Component returned null\");\n    }\n\n    // Store the instance\n    componentInstances.set(componentId, { component, context });\n\n    // Serialize and render\n    const data = serializeElement(element);\n    Nova.render(data);\n\n    // Run effects\n    for (const effect of context.pendingEffects) {\n      effect();\n    }\n  } finally {\n    currentContext = null;\n  }\n}\n\n/**\n * Mount a component as the root of a command.\n * This should be called from Nova.registerCommand handlers.\n *\n * @param component - The component function to render\n */\nexport function render(component: () => NovaElement | null): void {\n  const commandId = globalThis.__nova_current_command ?? \"default\";\n  renderComponent(commandId, component);\n}\n\n/**\n * Unmount a component and run cleanup effects.\n */\nexport function unmount(componentId: string): void {\n  const instance = componentInstances.get(componentId);\n  if (instance) {\n    // Run all cleanup functions\n    for (const cleanup of instance.context.effectCleanups.values()) {\n      cleanup();\n    }\n    componentInstances.delete(componentId);\n  }\n}\n\n// Extend global types\ndeclare global {\n  var __nova_current_command: string | null;\n}\n","/**\n * Navigation Hook\n *\n * Provides a hook for multi-view navigation in Nova extensions.\n */\n\nimport type { NovaElement } from \"./jsx-runtime.js\";\nimport { serializeElement } from \"./jsx-runtime.js\";\nimport { useMemo, useCallback, useState } from \"./hooks.js\";\nimport type { ComponentData } from \"./types/index.js\";\n\n/**\n * Navigation state and methods.\n */\nexport interface UseNavigationReturn {\n  /**\n   * Push a new view onto the navigation stack.\n   * Accepts either a serialized component or a JSX element.\n   */\n  push: (view: ComponentData | NovaElement) => void;\n\n  /**\n   * Pop the current view from the navigation stack.\n   * Returns true if a view was popped, false if at root.\n   */\n  pop: () => boolean;\n\n  /**\n   * Get the current stack depth.\n   */\n  depth: () => number;\n\n  /**\n   * Whether we can go back (depth > 0).\n   */\n  canGoBack: boolean;\n}\n\n/**\n * Hook for managing multi-view navigation.\n *\n * @example\n * ```tsx\n * function MyCommand() {\n *   const { push, pop, canGoBack } = useNavigation();\n *\n *   return (\n *     <List>\n *       <List.Item\n *         id=\"item-1\"\n *         title=\"View Details\"\n *         actions={{\n *           children: [{\n *             id: \"open\",\n *             title: \"Open\",\n *             onAction: \"open-detail\"\n *           }]\n *         }}\n *       />\n *     </List>\n *   );\n *\n *   // In action handler:\n *   // push(<DetailView item={selectedItem} />);\n * }\n * ```\n */\nexport function useNavigation(): UseNavigationReturn {\n  // Track depth locally for canGoBack\n  const [depth, setDepth] = useState(() => Nova.navigation.depth());\n\n  const push = (view: ComponentData | NovaElement): void => {\n    // Serialize if it's a JSX element\n    const data = isNovaElement(view) ? serializeElement(view) : view;\n    Nova.navigation.push(data);\n    setDepth((d) => d + 1);\n  };\n\n  const pop = (): boolean => {\n    const result = Nova.navigation.pop();\n    if (result) {\n      setDepth((d) => Math.max(0, d - 1));\n    }\n    return result;\n  };\n\n  const getDepth = (): number => {\n    return Nova.navigation.depth();\n  };\n\n  const canGoBack = depth > 0;\n\n  return {\n    push,\n    pop,\n    depth: getDepth,\n    canGoBack,\n  };\n}\n\n/**\n * Type guard for NovaElement.\n */\nfunction isNovaElement(value: unknown): value is NovaElement {\n  return (\n    typeof value === \"object\" &&\n    value !== null &&\n    \"$$typeof\" in value &&\n    (value as { $$typeof: symbol }).$$typeof === Symbol.for(\"nova.element\")\n  );\n}\n\n/**\n * Action callback registration helper.\n *\n * This provides a way to register callbacks that can be triggered by actions.\n * The callback ID is returned for use in action definitions.\n */\nconst callbacks = new Map<string, (...args: unknown[]) => void>();\nlet callbackCounter = 0;\n\n/**\n * Register a callback for use in action handlers.\n * Returns a callback ID that can be used in onAction.\n *\n * @example\n * ```tsx\n * const handleOpen = registerCallback((itemId) => {\n *   navigation.push(<DetailView itemId={itemId} />);\n * });\n *\n * <List.Item\n *   id=\"1\"\n *   title=\"Item\"\n *   actions={{\n *     children: [{\n *       id: \"open\",\n *       title: \"Open\",\n *       onAction: handleOpen\n *     }]\n *   }}\n * />\n * ```\n */\nexport function registerCallback<T extends (...args: unknown[]) => void>(\n  callback: T\n): string {\n  const id = `cb_${++callbackCounter}_${Date.now()}`;\n  callbacks.set(id, callback);\n  return id;\n}\n\n/**\n * Get a registered callback by ID.\n * Used internally by the runtime.\n */\nexport function getCallback(id: string): ((...args: unknown[]) => void) | undefined {\n  return callbacks.get(id);\n}\n\n/**\n * Clear a registered callback.\n */\nexport function clearCallback(id: string): void {\n  callbacks.delete(id);\n}\n\n// Export the callback map for the runtime\nexport { callbacks };\n","/**\n * IPC Bridge\n *\n * Type-safe wrappers around the Nova global API.\n * These functions provide better TypeScript integration and\n * can be used directly instead of calling Nova.* methods.\n */\n\nimport type {\n  FetchOptions,\n  FetchResponse,\n  ComponentData,\n} from \"./types/index.js\";\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Clipboard API\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Copy text to the system clipboard.\n * Requires \"clipboard\" permission in nova.toml.\n *\n * @param text - The text to copy\n */\nexport function clipboardCopy(text: string): void {\n  Nova.clipboard.copy(text);\n}\n\n/**\n * Read text from the system clipboard.\n * Requires \"clipboard\" permission in nova.toml.\n *\n * @returns The clipboard contents\n */\nexport function clipboardRead(): string {\n  return Nova.clipboard.read();\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Storage API\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Get a value from persistent storage.\n *\n * @param key - The key to retrieve\n * @returns The stored value, or undefined if not found\n */\nexport function storageGet<T = unknown>(key: string): T | undefined {\n  return Nova.storage.get(key) as T | undefined;\n}\n\n/**\n * Set a value in persistent storage.\n *\n * @param key - The key to set\n * @param value - The value to store (must be JSON-serializable)\n */\nexport function storageSet<T = unknown>(key: string, value: T): void {\n  Nova.storage.set(key, value);\n}\n\n/**\n * Remove a key from persistent storage.\n *\n * @param key - The key to remove\n */\nexport function storageRemove(key: string): void {\n  Nova.storage.remove(key);\n}\n\n/**\n * Get all keys in persistent storage.\n *\n * @returns Array of all storage keys\n */\nexport function storageKeys(): string[] {\n  return Nova.storage.keys();\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Preferences API\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Get a user-configured preference value.\n *\n * @param key - The preference key (as defined in nova.toml)\n * @returns The preference value, or undefined if not set\n */\nexport function getPreference<T = unknown>(key: string): T | undefined {\n  return Nova.preferences.get(key) as T | undefined;\n}\n\n/**\n * Get all user-configured preferences.\n *\n * @returns Object containing all preferences\n */\nexport function getAllPreferences(): Record<string, unknown> {\n  return Nova.preferences.all();\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Fetch API\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Perform an HTTP fetch request.\n * Requires the target domain to be listed in permissions.network.\n *\n * @param url - The URL to fetch\n * @param options - Fetch options (method, headers, body)\n * @returns Response with status, headers, and body\n */\nexport async function fetch(\n  url: string,\n  options?: FetchOptions\n): Promise<FetchResponse> {\n  return Nova.fetch(url, options);\n}\n\n/**\n * Convenience method for JSON GET requests.\n *\n * @param url - The URL to fetch\n * @param headers - Optional additional headers\n * @returns Parsed JSON response\n */\nexport async function fetchJson<T = unknown>(\n  url: string,\n  headers?: Record<string, string>\n): Promise<T> {\n  const response = await Nova.fetch(url, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      ...headers,\n    },\n  });\n\n  if (response.status >= 400) {\n    throw new Error(`HTTP ${response.status}: ${response.body}`);\n  }\n\n  return JSON.parse(response.body) as T;\n}\n\n/**\n * Convenience method for JSON POST requests.\n *\n * @param url - The URL to post to\n * @param body - JSON body to send\n * @param headers - Optional additional headers\n * @returns Parsed JSON response\n */\nexport async function postJson<T = unknown, R = unknown>(\n  url: string,\n  body: T,\n  headers?: Record<string, string>\n): Promise<R> {\n  const response = await Nova.fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      ...headers,\n    },\n    body: JSON.stringify(body),\n  });\n\n  if (response.status >= 400) {\n    throw new Error(`HTTP ${response.status}: ${response.body}`);\n  }\n\n  return JSON.parse(response.body) as R;\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// System API\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Open a URL in the default browser.\n *\n * @param url - The URL to open\n */\nexport function openUrl(url: string): void {\n  Nova.system.openUrl(url);\n}\n\n/**\n * Open a file or directory in the default application.\n *\n * @param path - The file path to open\n */\nexport function openPath(path: string): void {\n  Nova.system.openPath(path);\n}\n\n/**\n * Show a system notification.\n * Requires \"notifications\" permission in nova.toml.\n *\n * @param title - Notification title\n * @param body - Optional notification body\n */\nexport function showNotification(title: string, body?: string): void {\n  Nova.system.notify(title, body ?? \"\");\n}\n\n/**\n * Close the Nova window.\n */\nexport function closeWindow(): void {\n  Nova.system.closeWindow();\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Render API\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Render a component tree to the Nova UI.\n * Typically called via the render() function from hooks.ts instead.\n *\n * @param component - Serialized component data\n */\nexport function renderComponent(component: ComponentData): void {\n  Nova.render(component);\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Navigation API\n// ─────────────────────────────────────────────────────────────────────────────\n\n/**\n * Push a new view onto the navigation stack.\n *\n * @param component - The component to push\n */\nexport function navigationPush(component: ComponentData): void {\n  Nova.navigation.push(component);\n}\n\n/**\n * Pop the top view from the navigation stack.\n *\n * @returns True if a view was popped, false if stack was empty\n */\nexport function navigationPop(): boolean {\n  return Nova.navigation.pop();\n}\n\n/**\n * Get the current navigation stack depth.\n *\n * @returns The number of views in the stack\n */\nexport function navigationDepth(): number {\n  return Nova.navigation.depth();\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Command Registration\n// ─────────────────────────────────────────────────────────────────────────────\n\nimport type { CommandHandler } from \"./types/index.js\";\n\n/**\n * Register a command handler.\n *\n * @param name - Command name (must match command id in nova.toml)\n * @param handler - Handler function\n */\nexport function registerCommand(name: string, handler: CommandHandler): void {\n  Nova.registerCommand(name, handler);\n}\n"]}